<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Seat Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:300&display=swap" rel="stylesheet">
    <link rel="icon" type="image/ico" href="Icon2.ico">


    <style>
        body {
            padding: 2rem;
            padding-top: 180px;
            max-width: 1000px;
            margin: auto;
            position: relative;
            font-family: 'Open Sans', sans-serif;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            height: 45px;
            width: 100%;
            background-color: rgb(31, 31, 31);
            z-index: 1000;
        }

        #red-bar {
            position: fixed;
            top: 45px;
            left: 0;
            width: 100%;
            height: 115px;
            background-color: #b31919;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            z-index: 1001;
        }

        #red-bar img {
            max-height: 100px;
        }

        .skinny-font {
            font-family: 'Open Sans', sans-serif;
            font-weight: 300;
            font-size: 2rem;
            color: white;
            line-height: 1;
            margin-top: 5px;
        }

        .summary-box {
            border: 2px solid #ccc;
            border-radius: 8px;
            background-color: #f8f9fa;
            max-width: 300px;
            margin-left: 0;
        }
    </style>
</head>



<body>

    <div id="red-bar">
        <img src="LLC_Logo.png" alt="Logo">
        <span class="skinny-font">Seat Calculator</span>
    </div>
    </p>
    <div class="form-section">
        <h4>Class Information</h4>

    </div>
    <div class="form-section mb-4" style="width: 300px;">
        <label>Weeks (excluding finals)</label>
        <input type="number" id="weeks" class="form-control" value="15">

        <label for="lecture-credit" class="form-label">Lecture Credit</label>
        <input type="number" id="lecture-credit" class="form-control mb-2" value="0" min="0" step="0.5">

        <label for="lab-credit" class="form-label">Lab Credit</label>
        <input type="number" id="lab-credit" class="form-control mb-2" value="0" min="0" step="0.5">

        <label for="clinical-credit" class="form-label">Clinical Credit</label>
        <input type="number" id="clinical-credit" class="form-control mb-2" value="0" min="0" step="0.5">

        <p class="mt-3"><strong>Total Load:</strong> <span id="total-load">0.00</span></p>
    </div>




    <div class="form-section">
        <h4>Weekly Schedule</h4>
        <table class="table table-bordered text-center">
            <thead class="table-light">
                <tr>
                    <th>Block</th>
                    <th>Monday</th>
                    <th>Tuesday</th>
                    <th>Wednesday</th>
                    <th>Thursday</th>
                    <th>Friday</th>
                </tr>
            </thead>
            <tbody>
                <!-- Block 1 -->
                <tr>
                    <td><strong>Start Time</strong></td>
                    <td><input type="time" id="mon-start1" class="form-control"></td>
                    <td><input type="time" id="tue-start1" class="form-control"></td>
                    <td><input type="time" id="wed-start1" class="form-control"></td>
                    <td><input type="time" id="thu-start1" class="form-control"></td>
                    <td><input type="time" id="fri-start1" class="form-control"></td>
                </tr>
                <tr>
                    <td><strong>End Time</strong></td>
                    <td><input type="time" id="mon-end1" class="form-control"></td>
                    <td><input type="time" id="tue-end1" class="form-control"></td>
                    <td><input type="time" id="wed-end1" class="form-control"></td>
                    <td><input type="time" id="thu-end1" class="form-control"></td>
                    <td><input type="time" id="fri-end1" class="form-control"></td>
                </tr>
                <tr>
                    <td colspan="6" style="height: 20px; background-color: #f9f9f9;"></td>
                </tr>

                <!-- Block 2 -->
                <tr>
                    <td><strong>Start Time</strong></td>
                    <td><input type="time" id="mon-start2" class="form-control"></td>
                    <td><input type="time" id="tue-start2" class="form-control"></td>
                    <td><input type="time" id="wed-start2" class="form-control"></td>
                    <td><input type="time" id="thu-start2" class="form-control"></td>
                    <td><input type="time" id="fri-start2" class="form-control"></td>
                </tr>
                <tr>
                    <td><strong>End Time</strong></td>
                    <td><input type="time" id="mon-end2" class="form-control"></td>
                    <td><input type="time" id="tue-end2" class="form-control"></td>
                    <td><input type="time" id="wed-end2" class="form-control"></td>
                    <td><input type="time" id="thu-end2" class="form-control"></td>
                    <td><input type="time" id="fri-end2" class="form-control"></td>
                </tr>
                <tr>
                    <td colspan="6" style="height: 20px; background-color: #f9f9f9;"></td>
                </tr>

                <!-- Block 3 -->
                <tr>
                    <td><strong>Start Time</strong></td>
                    <td><input type="time" id="mon-start3" class="form-control"></td>
                    <td><input type="time" id="tue-start3" class="form-control"></td>
                    <td><input type="time" id="wed-start3" class="form-control"></td>
                    <td><input type="time" id="thu-start3" class="form-control"></td>
                    <td><input type="time" id="fri-start3" class="form-control"></td>
                </tr>
                <tr>
                    <td><strong>End Time</strong></td>
                    <td><input type="time" id="mon-end3" class="form-control"></td>
                    <td><input type="time" id="tue-end3" class="form-control"></td>
                    <td><input type="time" id="wed-end3" class="form-control"></td>
                    <td><input type="time" id="thu-end3" class="form-control"></td>
                    <td><input type="time" id="fri-end3" class="form-control"></td>
                </tr>
                <tr class="table-secondary">
                    <td><strong>Total per Day</strong></td>
                    <td id="total-mon">0.00 hrs</td>
                    <td id="total-tue">0.00 hrs</td>
                    <td id="total-wed">0.00 hrs</td>
                    <td id="total-thu">0.00 hrs</td>
                    <td id="total-fri">0.00 hrs</td>
                </tr>

            </tbody>
        </table>

        <div class="text-center">
            <p id="week-summary" class="mt-3">Total Scheduled Time: 0.00 hours/week</p>
            <button class="btn btn-secondary mt-2 ms-2" onclick="resetSchedule()">Reset</button>
            <div class="form-section mb-4" style="width: 300px;">
                <p id="error-message" class="text-danger fw-bold" style="display: none;">ICCB hours exceed actual hours!
                </p>
            </div>
            <div class="summary-box mt-4 p-3">
                <p class="mb-2 fw-bold" style="white-space: nowrap;">Actual Hour Total: <span
                        id="semester-total">0.00</span> hours</p>
                <p class="mb-0 fw-bold" style="white-space: nowrap;">ICCB Required Hours: <span
                        id="iccb-required">0.00</span> hours</p>
            </div>


        </div>
    </div>




    <script>
        function calculateScheduleHours() {
            const days = ["mon", "tue", "wed", "thu", "fri"];
            let totalMinutes = 0;
            let dailyMinutes = { mon: 0, tue: 0, wed: 0, thu: 0, fri: 0 };

            for (let block = 1; block <= 3; block++) {
                days.forEach(day => {
                    const start = document.getElementById(`${day}-start${block}`).value;
                    const end = document.getElementById(`${day}-end${block}`).value;

                    if (start && end) {
                        const [sh, sm] = start.split(":").map(Number);
                        const [eh, em] = end.split(":").map(Number);
                        const startDate = new Date(0, 0, 0, sh, sm);
                        const endDate = new Date(0, 0, 0, eh, em);
                        let diff = (endDate - startDate) / (1000 * 60);
                        if (diff > 0) {
                            totalMinutes += diff;
                            dailyMinutes[day] += diff;
                        }
                    }
                });
            }

            const totalHours = (totalMinutes / 60).toFixed(2);
            document.getElementById("week-summary").innerText = `Total Scheduled Time: ${totalHours} hours/week`;

            for (const day of days) {
                const dailyHours = (dailyMinutes[day] / 60).toFixed(2);
                document.getElementById(`total-${day}`).innerText = `${dailyHours} hrs`;
            }

            // Actual hours calculation
            const weeksInput = document.getElementById("weeks");
            const weeks = weeksInput ? parseInt(weeksInput.value) || 0 : 0;
            const actualHours = ((totalHours * weeks * 60) / 50).toFixed(2);
            document.getElementById("semester-total").innerText = actualHours;
            document.getElementById('iccb-required').innerText = (parseFloat(document.getElementById('total-load').innerText) * 15).toFixed(2);

            // Compare ICCB required with actual and apply red style if needed
            const actual = parseFloat(document.getElementById("semester-total").innerText) || 0;
            const iccb = parseFloat(document.getElementById("iccb-required").innerText) || 0;

            const semElement = document.getElementById("semester-total");
            const errorMessage = document.getElementById("error-message");

            if (iccb > actual) {
                errorMessage.innerText = "Actual Hours do not meet ICCB Required hours"
                errorMessage.style.display = "block";
            }
            else if(iccb<actual-10){
                errorMessage.innerText = "Actual Hours exceed ICCB Required hours"
errorMessage.style.display = "block";
            }
            else {

                errorMessage.style.display = "none";
            }


        }


        function resetSchedule() {
            document.querySelectorAll('input[type="time"]').forEach(input => {
                input.value = '';
            });
            document.getElementById('lecture-credit').value = 0;
            document.getElementById('lab-credit').value = 0;
            document.getElementById('clinical-credit').value = 0;
           ['mon', 'tue', 'wed', 'thu', 'fri'].forEach(day => {
    document.getElementById(`total-${day}`).innerText = '0.00 hrs';
});
            document.getElementById('total-load').innerText = "0.00";
            document.getElementById('semester-total').innerText = "0.00";
            document.getElementById("week-summary").innerText = `Total Scheduled Time: 0.00 hours/week`;
            document.getElementById('iccb-required').innerText = "0.00";
            document.getElementById("error-message").style.display = "none";
        }


        // Auto-update total time on any input change
        document.addEventListener("DOMContentLoaded", function () {
            // Recalculate schedule when any time input changes
            document.querySelectorAll('input[type="time"]').forEach(input => {
                input.addEventListener('input', calculateScheduleHours);
            });

            // When number fields change, update total load and schedule
            ['lecture-credit', 'lab-credit', 'clinical-credit', 'weeks'].forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    el.addEventListener('input', () => {
                        updateTotalLoad();
                        calculateScheduleHours();
                    });
                }
            });

            updateTotalLoad();
            calculateScheduleHours();
        });


        function updateTotalLoad() {
            const lecture = parseFloat(document.getElementById('lecture-credit').value) || 0;
            const lab = parseFloat(document.getElementById('lab-credit').value) || 0;
            const clinical = parseFloat(document.getElementById('clinical-credit').value) || 0;
            const total = lecture + lab + clinical;

            document.getElementById('total-load').innerText = total.toFixed(2);
            document.getElementById('iccb-required').innerText = (total * 15).toFixed(2);
        }



        window.onload = function () {
            ['lecture-credit', 'lab-credit', 'clinical-credit', 'weeks'].forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    el.addEventListener('input', updateTotalLoad);
                }
            });
            updateTotalLoad(); // Set initial value on page load
        };

    </script>


</body>

</html>